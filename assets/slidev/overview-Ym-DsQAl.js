import{d as te,e as ne,_ as oe,f as le,g as se}from"../modules/unplugin-icons-D_8KrfdX.js";import{d as G,a8 as ie,a9 as ae,t as T,aa as re,E as P,D as ce,a1 as de,n as J,B as r,o as i,c as x,i as y,h as F,ab as ue,ac as pe,b as k,j as me,K as ve,z as O,ad as fe,e as a,F as U,ae as j,k as B,g as I,x as b,l as h}from"../modules/vue-CGVKA8Ms.js";import{_ as Q,u as ge,a as he,s as ke,c as _e,C as A,i as be,b as R,t as xe,g as q}from"../index-DwKBFZYr.js";import{u as we,S as ye,D as Ce,a as De}from"./DrawingPreview-CGnOb4aL.js";import{I as W}from"./IconButton-BcSdNopW.js";import{N as $e}from"./NoteDisplay-qx099gOP.js";import{C as Ee}from"./ClicksSlider-BmnpZn5X.js";import"../modules/shiki-DWrICuqj.js";const Se=["placeholder"],Ne=G({__name:"NoteEditable",props:{no:{type:Number,required:!0},class:{default:""},editing:{default:!1},style:{default:()=>({})},placeholder:{default:"No notes for this slide"},clicksContext:{type:Object},autoHeight:{default:!1}},emits:["update:editing","markerDblclick","markerClick"],setup(w,{emit:z}){const l=w,_=z,u=ie(l,"editing",_,{passive:!0}),{info:v,update:C}=we(ae(l,"no")),f=T("");let D;const{ignoreUpdates:$}=re(f,p=>{if(!u.value)return;const c=l.no;clearTimeout(D),D=setTimeout(()=>{C({note:p},c)},500)});P(()=>{var p;return(p=v.value)==null?void 0:p.note},(p="")=>{u.value||(clearTimeout(D),$(()=>{f.value=p}))},{immediate:!0,flush:"sync"});const s=T(),E=T();ce(()=>{var p;u.value&&((p=s.value)==null||p.focus())}),de(s,()=>{u.value=!1});function K(){!l.autoHeight||!s.value||!u.value||s.value.scrollHeight>s.value.clientHeight&&(s.value.style.height=`${s.value.scrollHeight}px`)}return P([f,u],()=>{J(()=>{K()})},{flush:"post",immediate:!0}),(p,c)=>{var S;return r(u)?ue((i(),k("textarea",{key:1,ref_key:"inputEl",ref:s,"onUpdate:modelValue":c[2]||(c[2]=g=>f.value=g),class:y(["prose resize-none overflow-auto outline-none bg-transparent block border-primary border-2",l.class]),style:F([{"line-height":"1.75"},[l.style,E.value!=null?{height:`${E.value}px`}:{}]]),placeholder:w.placeholder,onKeydown:c[3]||(c[3]=me(g=>u.value=!1,["esc"]))},null,46,Se)),[[pe,f.value]]):(i(),x($e,{key:0,class:y(["border-transparent border-2",[l.class,f.value?"":"opacity-25 italic select-none"]]),style:F(l.style),note:f.value||w.placeholder,"note-html":(S=r(v))==null?void 0:S.noteHTML,"clicks-context":w.clicksContext,"auto-scroll":!w.autoHeight,onMarkerClick:c[0]||(c[0]=(g,N)=>_("markerClick",g,N)),onMarkerDblclick:c[1]||(c[1]=(g,N)=>_("markerDblclick",g,N))},null,8,["class","style","note","note-html","clicks-context","auto-scroll"]))}}}),Me=Q(Ne,[["__file","/home/runner/work/kotlin-spring-springio/kotlin-spring-springio/node_modules/@slidev/client/internals/NoteEditable.vue"]]),He={class:"h-screen w-screen of-hidden flex"},Be={class:"grid grid-rows-[auto_max-content] border-r border-main select-none max-h-full h-full"},Ie={class:"relative"},Te={class:"absolute left-0 top-0 bottom-0 w-200 flex flex-col flex-auto items-end group p2 gap-1 max-h-full of-x-visible of-y-auto",style:{direction:"rtl"}},Ve=["onClick"],We={p2:"",border:"t main"},ze={class:"select-none w-13 text-right my4 flex flex-col gap-1 items-end"},Ke={class:"text-3xl op20 mb2"},Oe={class:"flex flex-col gap-2 my5"},Ae=["onDblclick"],Fe={class:"py3 mt-0.5 mr--8 ml--4 op0 transition group-hover:op100"},Le={key:0,class:"select-none absolute bottom-0 right-0 bg-main rounded-tl p2 op35 text-xs"},Pe={class:"absolute top-0 right-0 px3 py1.5 border-b border-l rounded-lb bg-main border-main select-none"},Ue={class:"text-xs op50"},X=450,je=G({__name:"overview",setup(w){ge({title:`Overview - ${ke}`});const{openInEditor:z,slides:l}=he(),_=ve(new Map),u=T([]),v=T(null),C=O(()=>l.value.map(t=>{var e,o;return K(((o=(e=t.meta)==null?void 0:e.slide)==null?void 0:o.note)||"")})),f=O(()=>C.value.reduce((t,e)=>t+e,0)),D=O(()=>l.value.map(t=>E(t)).reduce((t,e)=>t+e,0)),$=new WeakMap;function s(t){return $.has(t)||$.set(t,_e(t,A)),$.get(t)}function E(t){var e,o;return((e=t.meta)==null?void 0:e.clicks)||((o=s(t))==null?void 0:o.total)}function K(t){var e;return((e=t.match(/[\w’'-]+/g))==null?void 0:e.length)||0}function p(t){const e=t.getBoundingClientRect(),o=20;return e.top>=0-o&&e.left>=0-o&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)+o&&e.right<=(window.innerWidth||document.documentElement.clientWidth)+o}function c(){const t=[];Array.from(_.entries()).forEach(([e,o])=>{p(o)&&t.push(e)}),u.value=t}function S(t){const e=document.createElement("a");e.target="_blank",e.href=t,e.click()}function g(t){const e=_.get(t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}function N(t,e,o){const M=s(o);M.current===e?M.current=A:M.current=e,t.preventDefault()}return fe(()=>{J(()=>{c()})}),(t,e)=>{const o=te,M=ne,Y=oe,Z=le,ee=se;return i(),k("div",He,[a("nav",Be,[a("div",Ie,[a("div",Te,[(i(!0),k(U,null,j(r(l),(n,m)=>{var H,d,V,L;return i(),k("div",{key:n.no,class:"relative",style:{direction:"ltr"}},[a("button",{class:y(["relative transition duration-300 w-8 h-8 rounded hover:bg-active hover:op100",u.value.includes(m)?"op100 text-primary bg-gray:5":"op20"]),onClick:Re=>g(m)},[a("div",null,b(m+1),1)],10,Ve),(d=(H=n.meta)==null?void 0:H.slide)!=null&&d.title?(i(),k("div",{key:0,class:y(["pointer-events-none select-none absolute left-110% backdrop-blur-8 top-50% translate-y--50% ws-nowrap z-10 px2 shadow-xl rounded border border-main transition duration-400 op0 group-hover:op100",u.value.includes(m)?"text-primary":"text-main important-text-op-50"])},b((L=(V=n.meta)==null?void 0:V.slide)==null?void 0:L.title),3)):I("v-if",!0)])}),128))])]),a("div",We,[r(be)?I("v-if",!0):(i(),x(W,{key:0,title:r(R)?"Switch to light mode theme":"Switch to dark mode theme",onClick:e[0]||(e[0]=n=>r(xe)())},{default:B(()=>[r(R)?(i(),x(o,{key:0})):(i(),x(M,{key:1}))]),_:1},8,["title"]))])]),a("main",{class:"flex-1 h-full of-auto",style:F(`grid-template-columns: repeat(auto-fit,minmax(${X}px,1fr))`),onScroll:c},[(i(!0),k(U,null,j(r(l),(n,m)=>{var H;return i(),k("div",{key:n.no,ref_for:!0,ref:d=>_.set(m,d),class:y(["relative border-t border-main of-hidden flex gap-4 min-h-50 group",m===0?"pt5":""])},[a("div",ze,[a("div",Ke,b(m+1),1),h(W,{class:"mr--3 op0 group-hover:op80",title:"Play in new tab",onClick:d=>S(r(q)(n,!1))},{default:B(()=>[h(Y)]),_:2},1032,["onClick"]),(H=n.meta)!=null&&H.slide?(i(),x(W,{key:0,class:"mr--3 op0 group-hover:op80",title:"Open in editor",onClick:d=>r(z)(`${n.meta.slide.filepath}:${n.meta.slide.start}`)},{default:B(()=>[h(Z)]),_:2},1032,["onClick"])):I("v-if",!0)]),a("div",Oe,[a("div",{class:"border rounded border-main overflow-hidden bg-main select-none h-max",onDblclick:d=>S(r(q)(n,!1))},[(i(),x(De,{key:n.no,width:X,class:"pointer-events-none important:[&_*]:select-none"},{default:B(()=>[h(ye,{"clicks-context":s(n),route:n,"render-context":"overview"},null,8,["clicks-context","route"]),h(Ce,{page:n.no},null,8,["page"])]),_:2},1024))],40,Ae),E(n)?(i(),x(Ee,{key:0,"clicks-context":s(n),class:"w-full mt-2",onDblclick:d=>s(n).current=r(A)},null,8,["clicks-context","onDblclick"])):I("v-if",!0)]),a("div",Fe,[h(W,{title:"Edit Note",class:y(["rounded-full w-9 h-9 text-sm",v.value===n.no?"important:op0":""]),onClick:d=>v.value=n.no},{default:B(()=>[h(ee)]),_:2},1032,["class","onClick"])]),h(Me,{no:n.no,class:"max-w-250 w-250 text-lg rounded p3","auto-height":!0,editing:v.value===n.no,"clicks-context":s(n),onDblclick:d=>v.value!==n.no?v.value=n.no:null,"onUpdate:editing":e[1]||(e[1]=d=>v.value=null),onMarkerClick:(d,V)=>N(d,V,n)},null,8,["no","editing","clicks-context","onDblclick","onMarkerClick"]),C.value[m]>0?(i(),k("div",Le,b(C.value[m])+" words ",1)):I("v-if",!0)],2)}),128))],36),a("div",Pe,[a("div",Ue,b(r(l).length)+" slides · "+b(D.value+r(l).length-1)+" clicks · "+b(f.value)+" words ",1)])])}}}),tt=Q(je,[["__file","/home/runner/work/kotlin-spring-springio/kotlin-spring-springio/node_modules/@slidev/client/pages/overview.vue"]]);export{tt as default};
